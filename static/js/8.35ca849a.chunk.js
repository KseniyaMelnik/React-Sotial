(this.webpackJsonpuntitled=this.webpackJsonpuntitled||[]).push([[8],{546:function(e,t,n){"use strict";n.r(t);var s=n(70),c=n(423),r=n(0),a=n(547),i=n(388),u=n(548),o=n(4),l=u.a.TextArea,j=function(){var e=Object(r.useState)(null),t=Object(c.a)(e,2),n=t[0],s=t[1];return Object(r.useEffect)((function(){var e,t=function(){setTimeout(n,3e3)};function n(){e&&(e.removeEventListener("close",t),e.close()),e=new WebSocket("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx"),s(e),e.addEventListener("close",t)}return n(),function(){e.removeEventListener("close",t),e.close()}}),[]),Object(o.jsxs)("div",{children:[Object(o.jsx)(d,{wsChannel:n}),Object(o.jsx)(v,{wsChannel:n})]})},d=function(e){var t=e.wsChannel,n=Object(r.useState)([]),a=Object(c.a)(n,2),i=a[0],u=a[1];return Object(r.useEffect)((function(){var e=function(e){var t=JSON.parse(e.data);u((function(e){return[].concat(Object(s.a)(e),Object(s.a)(t))}))};return null===t||void 0===t||t.addEventListener("message",e),function(){null===t||void 0===t||t.removeEventListener("message",e)}}),[t]),Object(o.jsx)("div",{style:{height:"400px",overflow:"auto"},children:i.map((function(e,t){return Object(o.jsx)(b,{message:e},t)}))})},b=function(e){var t=e.message;return Object(o.jsxs)("div",{children:[Object(o.jsx)(a.a,{width:30,src:t.photo})," ",Object(o.jsx)("b",{children:t.userName}),Object(o.jsx)("br",{}),t.message,Object(o.jsx)("hr",{})]})},v=function(e){var t=e.wsChannel,n=Object(r.useState)(""),s=Object(c.a)(n,2),a=s[0],u=s[1],j=Object(r.useState)("pending"),d=Object(c.a)(j,2),b=d[0],v=d[1];Object(r.useEffect)((function(){var e=function(){v("ready")};return null===t||void 0===t||t.addEventListener("open",e),function(){null===t||void 0===t||t.removeEventListener("open",e)}}),[t]);return Object(o.jsxs)("div",{children:[Object(o.jsx)(l,{rows:2,placeholder:"enter your message",value:a,onChange:function(e){return u(e.currentTarget.value)},style:{width:400}}),Object(o.jsx)(i.a,{onClick:function(){a&&(null===t||void 0===t||t.send(a),u(""))},disabled:null==t||"ready"!==b,children:"Send"})]})};t.default=function(){return Object(o.jsx)("div",{children:Object(o.jsx)(j,{})})}}}]);
//# sourceMappingURL=8.35ca849a.chunk.js.map